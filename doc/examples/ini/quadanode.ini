; This example shows how to get the quad-anode data.

;----------------------------PostProcessors------------------------------------

;timesums

[PostProcessor]
tsx\ID = 162
tsx\Write = false
tsx\Hide = true
tsx\Detector = Quaddetector
tsx\Layer = X
tsx\TimeRangeLow = 000
tsx\TimeRangeHigh = 40000
TimesumX\ID = 60
TimesumX\HistName = tsx
TimesumX\XNbrBins = 2000
TimesumX\XLow = 0
TimesumX\XUp = 200

[PostProcessor]
tsy\ID = 162
tsy\Write = false
tsy\Hide = true
tsy\Detector = Quaddetector
tsy\Layer = Y
tsy\TimeRangeLow = 000
tsy\TimeRangeHigh = 40000
TimesumY\ID = 60
TimesumY\HistName = tsy
TimesumY\XNbrBins = 2000
TimesumY\XLow = 0
TimesumY\XUp = 200


; Ratios

[PostProcessor]
nrh_\ID = 165
nrh_\Write = false
nrh_\Hide = true
nrh_\Detector = Quaddetector
NRecHits\ID = 60
NRecHits\HistName = nrh_
NRecHits\XNbrBins = 400
NRecHits\XLow = 0
NRecHits\XUp = 200

[PostProcessor]
nmcph_\ID = 150
nmcph_\Write = false
nmcph_\Hide = true
nmcph_\Detector = Quaddetector
NMCPHits\ID = 60
NMCPHits\HistName = nmcph_
NMCPHits\XNbrBins = 800
NMCPHits\XLow = 0
NMCPHits\XUp = 400

[PostProcessor]
nx1h_\ID = 160
nx1h_\Write = false
nx1h_\Hide = true
nx1h_\Detector = Quaddetector
nx1h_\Layer = X
nx1h_\Wireend = 1
NX1Hits\ID = 60
NX1Hits\HistName = nx1h_
NX1Hits\XNbrBins = 800
NX1Hits\XLow = 0
NX1Hits\XUp = 400

[PostProcessor]
nx2h_\ID = 160
nx2h_\Write = false
nx2h_\Hide = true
nx2h_\Detector = Quaddetector
nx2h_\Layer = X
nx2h_\Wireend = 2
NX2Hits\ID = 60
NX2Hits\HistName = nx2h_
NX2Hits\XNbrBins = 800
NX2Hits\XLow = 0
NX2Hits\XUp = 400

[PostProcessor]
ny1h_\ID = 160
ny1h_\Write = false
ny1h_\Hide = true
ny1h_\Detector = Quaddetector
ny1h_\Layer = Y
ny1h_\Wireend = 1
NY1Hits\ID = 60
NY1Hits\HistName = ny1h_
NY1Hits\XNbrBins = 800
NY1Hits\XLow = 0
NY1Hits\XUp = 400

[PostProcessor]
ny2h_\ID = 160
ny2h_\Write = false
ny2h_\Hide = true
ny2h_\Detector = Quaddetector
ny2h_\Layer = Y
ny2h_\Wireend = 2
NY2Hits\ID = 60
NY2Hits\HistName = ny2h_
NY2Hits\XNbrBins = 800
NY2Hits\XLow = 0
NY2Hits\XUp = 400




; Images of all charge states

[PostProcessor]
xy_\ID = 166
xy_\Write = false
xy_\Hide = true
xy_\Detector = Quaddetector
xy_\XInput = x
xy_\YInput = y
xy_\ConditionInput = t
xy_\ConditionLow = 0
xy_\ConditionHigh = 40000
xy_\XNbrBins = 300
xy_\XLow = -60
xy_\XUp = 60
xy_\YNbrBins = 400
xy_\YLow = -60
xy_\YUp = 60
XY\ID = 62
XY\HistName = xy_

[PostProcessor]
xt_\ID = 166
xt_\Write = false
xt_\Hide = true
xt_\Detector = Quaddetector
xt_\XInput = t
xt_\YInput = x
xt_\ConditionInput = y
xt_\ConditionLow = -100
xt_\ConditionHigh = 100
xt_\XNbrBins = 500
xt_\XLow = 0
xt_\XUp = 40000
xt_\YNbrBins = 300
xt_\YLow = -60
xt_\YUp = 60
XT\ID = 62
XT\HistName = xt_

[PostProcessor]
yt_\ID = 166
yt_\Write = false
yt_\Hide = true
yt_\Detector = Quaddetector
yt_\XInput = t
yt_\YInput = y
yt_\ConditionInput = x
yt_\ConditionLow = -100
yt_\ConditionHigh = 100
yt_\XNbrBins = 500
yt_\XLow = 0
yt_\XUp = 40000
yt_\YNbrBins = 300
yt_\YLow = -60
yt_\YUp = 60
YT\ID = 62
YT\HistName = yt_


; individual acqiris channel for the signals of the det

[PostProcessor]
MCP\ID = 110
MCP\Write = false
MCP\InstrumentId = 8
MCP\ChannelNbr = 16

[PostProcessor]
X1\ID = 110
X1\Write = false
X1\InstrumentId = 8
X1\ChannelNbr = 18

[PostProcessor]
X2\ID = 110
X2\Write = false
X2\InstrumentId = 8
X2\ChannelNbr = 19

[PostProcessor]
Y1\ID = 110
Y1\Write = false
Y1\InstrumentId = 8
Y1\ChannelNbr = 14

[PostProcessor]
Y2\ID = 110
Y2\Write = false
Y2\InstrumentId = 8
Y2\ChannelNbr = 15


; create a tof averaged spectrum over all events

[PostProcessor]
MCPAverage\ID = 61
MCPAverage\NbrOfAverages = 0
MCPAverage\HistName = MCP



; create a PIPICO spectrum

[PostProcessor]
PIPICO_\ID = 220
PIPICO_\XNbrBins = 100
PIPICO_\XLow = 2000
PIPICO_\XUp = 40000
PIPICO_\YNbrBins = 100
PIPICO_\YLow = 2000
PIPICO_\YUp = 40000
PIPICO_\FirstDetector = Quaddetector
PIPICO_\SecondDetector = Quaddetector
PIPICO\ID = 62
PIPICO\HistName = PIPICO_


; tof spectrum with just mcp hits

[PostProcessor]
MCPHits_\ID = 151
MCPHits_\Detector = Quaddetector
MCPHits_\XNbrBins = 5000
MCPHits_\XLow = 0
MCPHits_\XUp = 40000
MCPHits_\Write = false
MCPHits_\Hide = true
MCPHits\ID = 62
MCPHits\HistName = MCPHits_


; Images for selected charge states

; background+

[PostProcessor]
px_\ID = 250
px_\Write = false
px_\Hide = true
px_\Detector = Quaddetector
px_\Particle = BackgroundP
px_\Property = px
px_\XNbrBins = 300
px_\XLow = -30
px_\XUp = 30
PX\ID = 62
PX\HistName = px_

[PostProcessor]
py_\ID = 250
py_\Write = false
py_\Hide = true
py_\Detector = Quaddetector
py_\Particle = BackgroundP
py_\Property = py
py_\XNbrBins = 300
py_\XLow = -30
py_\XUp = 30
PY\ID = 62
PY\HistName = py_

[PostProcessor]
pz_\ID = 250
pz_\Write = false
pz_\Hide = true
pz_\Detector = Quaddetector
pz_\Particle = BackgroundP
pz_\Property = pz
pz_\XNbrBins = 1000
pz_\XLow = -30
pz_\XUp = 30
PZ\ID = 62
PZ\HistName = pz_

[PostProcessor]
eau_\ID = 250
eau_\Write = false
eau_\Hide = true
eau_\Detector = Quaddetector
eau_\Particle = BackgroundP
eau_\Property = e_au
eau_\XNbrBins = 300
eau_\XLow = -0.1
eau_\XUp = 1
Eau\ID = 62
Eau\HistName = eau_

[PostProcessor]
eeV_\ID = 250
eeV_\Write = false
eeV_\Hide = true
eeV_\Detector = Quaddetector
eeV_\Particle = BackgroundP
eeV_\Property = e_eV
eeV_\XNbrBins = 300
eeV_\XLow = -0.1
eeV_\XUp = 6
EeV\ID = 62
EeV\HistName = eeV_

[PostProcessor]
xmm_\ID = 250
xmm_\Write = false
xmm_\Hide = true
xmm_\Detector = Quaddetector
xmm_\Particle = BackgroundP
xmm_\Property = x_mm
xmm_\XNbrBins = 300
xmm_\XLow = -60
xmm_\XUp = 60
Xmm\ID = 62
Xmm\HistName = xmm_

[PostProcessor]
ymm_\ID = 250
ymm_\Write = false
ymm_\Hide = true
ymm_\Detector = Quaddetector
ymm_\Particle = BackgroundP
ymm_\Property = y_mm
ymm_\XNbrBins = 300
ymm_\XLow = -60
ymm_\XUp = 60
Ymm\ID = 62
Ymm\HistName = ymm_

[PostProcessor]
pxpy_\ID = 251
pxpy_\Write = false
pxpy_\Hide = true
pxpy_\Detector = Quaddetector
pxpy_\Particle = BackgroundP
pxpy_\FirstProperty = px
pxpy_\SecondProperty = py
pxpy_\XNbrBins = 300
pxpy_\XLow = -60
pxpy_\XUp = 60
pxpy_\YNbrBins = 300
pxpy_\YLow = -60
pxpy_\YUp = 60
PXPY\ID = 62
PXPY\HistName = pxpy_

[PostProcessor]
pxpz_\ID = 251
pxpz_\Write = false
pxpz_\Hide = true
pxpz_\Detector = Quaddetector
pxpz_\Particle = BackgroundP
pxpz_\FirstProperty = px
pxpz_\SecondProperty = pz
pxpz_\XNbrBins = 300
pxpz_\XLow = -60
pxpz_\XUp = 60
pxpz_\YNbrBins = 300
pxpz_\YLow = -60
pxpz_\YUp = 60
PXPZ\ID = 62
PXPZ\HistName = pxpz_



;---------------------------------setup----------------------------------------
; since nothing than the acqiris detectors are used we don't need any pre-
; analyzer

[PreAnalyzer]
useCommercialCCDAnalyzer=false
useAcqirisAnalyzer=false
useMachineAnalyzer=false
usepnCCDAnalyzer=false

;only extract acqiris data from the datagram

[Converter]
useCommercialCCDConverter=false
useAcqirisConverter=true
useMachineConverter=false
usepnCCDConverter=false




; set up the Quad Detector. We need to set the Layers individually.

;general setup
[AcqirisDetectors/Quaddetector]
DetectorType = 0
DelaylineType = 0

; the mcp signals
MCP\SignalExtractionMethod=1
MCP\CenterOfMass\AcqirisInstrument=8
MCP\CenterOfMass\ChannelNumber=16
MCP\CenterOfMass\Timeranges\size=1
MCP\CenterOfMass\Timeranges\1\LowerLimit=0
MCP\CenterOfMass\Timeranges\1\UpperLimit=40000
MCP\CenterOfMass\Polarity=2
MCP\CenterOfMass\Threshold=0.05

; x1
XLayer\One\SignalExtractionMethod=1
XLayer\One\CenterOfMass\AcqirisInstrument=8
XLayer\One\CenterOfMass\ChannelNumber=18
XLayer\One\CenterOfMass\Timeranges\size=1
XLayer\One\CenterOfMass\Timeranges\1\LowerLimit=0
XLayer\One\CenterOfMass\Timeranges\1\UpperLimit=40000
XLayer\One\CenterOfMass\Polarity=2
XLayer\One\CenterOfMass\Threshold=0.05

; x2
XLayer\Two\SignalExtractionMethod=1
XLayer\Two\CenterOfMass\AcqirisInstrument=8
XLayer\Two\CenterOfMass\ChannelNumber=19
XLayer\Two\CenterOfMass\Timeranges\size=1
XLayer\Two\CenterOfMass\Timeranges\1\LowerLimit=0
XLayer\Two\CenterOfMass\Timeranges\1\UpperLimit=40000
XLayer\Two\CenterOfMass\Polarity=2
XLayer\Two\CenterOfMass\Threshold=0.05


; y1
YLayer\One\SignalExtractionMethod=1
YLayer\One\CenterOfMass\AcqirisInstrument=8
YLayer\One\CenterOfMass\ChannelNumber=14
YLayer\One\CenterOfMass\Timeranges\size=1
YLayer\One\CenterOfMass\Timeranges\1\LowerLimit=0
YLayer\One\CenterOfMass\Timeranges\1\UpperLimit=40000
YLayer\One\CenterOfMass\Polarity=2
YLayer\One\CenterOfMass\Threshold=0.05

; y2
YLayer\Two\SignalExtractionMethod=1
YLayer\Two\CenterOfMass\AcqirisInstrument=8
YLayer\Two\CenterOfMass\ChannelNumber=15
YLayer\Two\CenterOfMass\Timeranges\size=1
YLayer\Two\CenterOfMass\Timeranges\1\LowerLimit=0
YLayer\Two\CenterOfMass\Timeranges\1\UpperLimit=40000
YLayer\Two\CenterOfMass\Polarity=2
YLayer\Two\CenterOfMass\Threshold=0.05


; sorting routine
AnalysisMethod = 0

Simple\Runtime=150
Simple\McpRadius=60
Simple\LayersToUse=0
Simple\TimesumFirstLayerLow=70
Simple\TimesumFirstLayerHigh=80
Simple\ScalefactorFirstLayer=0.37
Simple\TimesumSecondLayerLow=70
Simple\TimesumSecondLayerHigh=80
Simple\ScalefactorSecondLayer=0.37

; particles on detector

Particles\BackgroundP\Charge = 1
Particles\BackgroundP\Mass = 28
;Particles\BackgroundP\ConditionType = 3
Particles\BackgroundP\ConditionType = 0
Particles\BackgroundP\ToFCondition\Low = 11000
Particles\BackgroundP\ToFCondition\High = 11500

;Particles\BackgroundP\ConditionType = 1
;Particles\BackgroundP\RadiusCondition\CenterX = 0
;Particles\BackgroundP\RadiusCondition\CenterY = 0
;Particles\BackgroundP\RadiusCondition\MaximumRadius = 15

Particles\BackgroundP\Spectrometer\BFieldIsOn = false
Particles\BackgroundP\Spectrometer\CyclotronPeriode = 0
Particles\BackgroundP\Spectrometer\RotationClockwise = true
Particles\BackgroundP\Spectrometer\Regions\size = 1
Particles\BackgroundP\Spectrometer\Regions\1\Length = 50
Particles\BackgroundP\Spectrometer\Regions\1\EField = 2

Particles\BackgroundP\Corrections\T0 = -820
Particles\BackgroundP\Corrections\CorrectX = -10.4
Particles\BackgroundP\Corrections\CorrectY = -2.2
Particles\BackgroundP\Corrections\ScaleX = 1
Particles\BackgroundP\Corrections\ScaleY = 1
Particles\BackgroundP\Corrections\Angle = 0


